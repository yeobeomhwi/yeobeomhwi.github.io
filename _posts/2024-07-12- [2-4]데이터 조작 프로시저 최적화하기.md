---
title: "SECTION 2-4 - 데이터 조작 프로시저 최적화하기"
date: "2024-07-12"
categories: [정보처리기사]
tags:
    - 정보처리기사 
    - SECTION 2
---

# 옵티마이저

## RBO (Rule-Based Optimizer)

**데이터베이스의 규칙을 기반으로 SQL 쿼리의 실행 계획을 최적화하는 옵티마이저.**

- **SQL 쿼리를 파싱하여 미리 정의된 규칙(rule)을 적용해 실행 계획을 결정**함.
- 간단한 쿼리는 빠르게 최적화 수행할 수 있으나, **복잡한 쿼리의 경우 최적화 결과가 비효율적**일 수 있음.

## CBO (Cost-Based Optimizer)

**실행 계획의 비용을 고려하여 최적화를 수행하는 옵티마이저.**

- **실행 계획의 비용(Cost)을 고려하여 최적의 실행 계획을 결정**함.
- 비용은 인덱스 스캔, 테이블 스캔, 조인 등의 연산을 수행하는 데 필요한 자원을 기반으로 계산됨.
- 데이터베이스 시스템의 대부분은 CBO를 기본 옵티마이저로 사용하여 **더 정확하고 효율적인 실행 계획을 생성**함.

----------------------------------

# APM (Application Performance Management)

- **애플리케이션의 성능과 가용성을 관리하는 프로세스**
- 데이터베이스에서 APM은 **SQL 쿼리의 실행 시간, CPU 사용량, 메모리 사용량, 디스크 I/O 등과 같은 성능 지표를 수집 분석**하여 데이터베이스의 성능을 모니터링하고 최적화하는 것을 목적으로 함.
- APM을 사용하면 **데이터베이스에서 발생하는 성능 문제를 더욱 빠르게 식별하고 해결**할 수 있음.
- APM은 사용자나 애플리케이션에서 발생하는 성능 문제를 식별할 수 있어서 **사용자 경험을 향상시키는 데도 도움**을 줌.

---------------------------

# 2단계 로킹 규약 (Two-Phase Locking Protocol)

- **로킹 기법** 중 하나로, 트랜잭션이 데이터를 읽거나 쓰기 위해 락(Lock)을 요청할 때, 락을 먼저 획득한 후 사용이 끝나면 반드시 락을 해제하는 방식으로 동작한다.
- **확장 단계 (Expanding Phase)**: 트랜잭션이 필요한 락을 순서대로 획득해 나가는 단계. **공유 락을 요청한 후에는 배타적 락을 요청할 수 없다.**
- **수축 단계 (Shrinking Phase)**: 트랜잭션이 더 이상 락을 요청하지 않고 락을 반납하는 단계. **배타적 락을 먼저 해제한 후 공유 락을 해제한다.**
- 2단계 로킹 규약을 따르면 **동시에 여러 개의 트랜잭션이 실행될 때 서로의 데이터 충돌을 방지하고 데이터 무결성을 보장**할 수 있다.
- 그러나 **데드락과 같은 병행 제어 문제가 발생할 수 있기 때문에 데드락 방지 기법을 함께 적용**해야 한다.

-----------------------------
# 교착상태 (Deadlock)

- **두 개 이상의 프로세스나 스레드가 서로 상대방이 점유한 자원을 요청**하며, 대기 상태에 빠져 무한히 기다리는 상태를 말한다. 시스템 전체가 정지될 수 있음.

## 교착상태 발생의 필요조건

| 필요조건| 설명 | 
|---|-------|
| **상호배제 <Br> (Mutual exclusion)** | 자원은 동시에 한 프로세스나 스레드에 의해서만 사용될 수 있다. |
| **점유대기 <Br> (Hold and wait)**   | 자원을 점유한 상태에서 다른 자원을 요청하면서 대기하는 상태이다. | 
| **비선점 <Br> (No preemption)**    | 다른 프로세스나 스레드가 이미 점유한 자원을 강제로 빼앗을 수 없다. |
| **순환대기 <br> (Circular wait)**  | 자원을 요청하는 프로세스나 스레드들이 서로 순환적으로 자원을 대기하는 상황이다. |

- 이러한 조건들이 모두 충족되면, 더 이상 진행할 수 없는 상태가 되어 **교착상태가 발생**한다. 
- 교착상태는 시스템의 성능을 저하시키고, 시스템의 안정성을 해치므로, **교착상태를 방지하기 위한 여러 가지 기법들**이 존재한다. 교착상태를 예방하거나 회피하는 기법, 교착상태가 발생했을 때 이를 탐지하고 복구하는 기법 등이 사용된다.

----------------------

# ACID 속성

- **원자성 (Atomicity):**
  - 전체가 **실행되거나 전혀 실행되지 않아야 한다.**
  - 중간에 **실패하면 이전 상태로 롤백**되어야 한다.

- **일관성 (Consistency):**
  - 트랜잭션이 실행된 결과는 **데이터베이스의 일관성**을 유지해야 한다.
  - 트랜잭션이 실행 전과 후에도 **데이터베이스의 제약조건, 규칙 등이 유효**해야 한다.

- **격리성 (Isolation):**
  - 여러 트랜잭션이 동시에 실행되더라도, 각 트랜잭션은 **다른 트랜잭션에 영향을 받지 않고 독립적으로 실행**되어야 한다.
  - 하나의 트랜잭션이 **다른 트랜잭션의 변경사항을 볼 수 없어야 한다.**

- **지속성 (Durability):**
  - 트랜잭션이 성공적으로 완료되면, 그 결과는 **영구적으로 데이터베이스에 저장**되어야 한다.
  - 시스템의 문제나 장애 등으로 인해 발생하는 **데이터 손실을 방지**하기 위해, 트랜잭션의 결과는 **영구적으로 보존**되어야 한다.
